var gfi=gfi||{};gfi.main=function(){(function(a){a(window.jQuery,window,document)}(function(c,f,g){var i=c("meta[name=pbeEnabled]").size()===1;var h,e,b={init:function(){this.buildNavigation();this.setFirefoxKeyboard();this.initHeader();this.initBreadcrumb();this.initCarousel();this.initAccordion();this.initIndexLists();this.initContenttabs();this.initFancybox();this.initSearch();this.initEvents();this.initTeaserHeight();this.initResizeListener();this.initLinklist();this.initEmbeddedTeaserVid()},buildNavigation:function(){var m=c(f).scrollTop(),l=c(".header"),t=c(".infobar"),s=c(".search-wrapper").find("#search-field"),u=c(".header-content-wrapper"),p=u.find("> .content-wrapper"),o;h=(c(f).width()<=640);e=l.hasClass("mini-site");if(l.length>0&&!e){if(s.length>0){o=s.offset().top+s.outerHeight()}else{o=p.offset().top+p.outerHeight()}c(f).scroll(function(){m=c(f).scrollTop();if(m>=o&&(!t.is(":visible")||h)){if(h){c("#logo-infobar").css("visibility","visible")}else{t.fadeIn(400)}}else{if(m<o&&t.is(":visible")&&t.css("opacity")==="1"){if(h){c("#logo-infobar").css("visibility","visible")}else{t.fadeOut(400)}}}})}else{if(l.length>0&&e){o=u.offset().top+u.outerHeight();var n=t.clone();n.find("[id]").each(function(){var v=c(this),w=v.attr("id");v.attr("id",w+"-cl1");if(v.is("input")){v.prevAll("label").attr("for",w+"-cl1")}});c(f).scroll(function(){if(!h){m=c(f).scrollTop();if(m>=o&&!n.is(":visible")){n.hide().appendTo(c(".header-content-wrapper")).css("position","fixed").fadeIn(400)}else{if(m<o&&n.is(":visible")){n.fadeOut(200,function(){n.remove()})}}}})}}if(h){c(".header .menu-wrapper").mobilenavigation();c("#logo-infobar").css("visibility","visible");var r=c("#mobileSubNavigation");var q=c(r).data("call-url");if(q!==undefined){c.ajax({url:q,success:function(v){c(r).replaceWith(v);d()}})}else{d()}}else{c(".nav.main").mcnavigation({url:c(".nav.main").data("nav-root-url"),maxPanes:6})}},setFirefoxKeyboard:function(){if(!i){c(".search-field").focus()}},initHeader:function(){c(".choose-language").on("click",function(){c(".language-menu").fadeToggle(400)});c(".mobile-choose-language").on("click",function(){c(".mobile-language-menu").css({width:c(".mobile-choose-language").width()+"px"});c(".mobile-language-menu").fadeToggle(400)});c(f).on("resize",function(){c(".mobile-language-menu").css({width:c(".mobile-choose-language").width()+"px"})})},initBreadcrumb:function(){c(".breadcrumb-list-wrapper").scrollLeft(99999)},initCarousel:function(){c(".js-content-wrapper").responsiveSlides({timeout:10000,pager:true,pause:true,pauseControls:true});c(".c-teaser").ihktab()},initAccordion:function(){c(".ll-acc-teaser").simpleaccordion();c(".ll-acc-teaser ul:first-child a").addClass("active");c("#js-event-01").slideDown(300).addClass("open").attr("aria-expanded","true").attr("aria-hidden","false")},initIndexLists:function(){var n=c(".ind-teaser");function m(p){var q={};q.letter=p;return c.ajax({url:n.data("letter-content-url"),type:"get",data:q}).done(function(t){var u=c(".a-z-list-wrapper");u.html(t);var s=c(".a-z-list");if(s.find(".acc-header").length>0){s.simpleaccordion()}var r=c(".c-teaser");if(r.length){if(u[0].dataset&&u[0].dataset.aztype==="keywords"){r.ihktab()}else{r.ihktabcontact()}}return false})}function l(q){var p=q?q.split("?")[1]:f.location.search.slice(1);var t={};if(p){p=p.split("#")[0];var w=p.split("&");for(var u=0;u<w.length;u++){var x=w[u].split("=");var r=undefined;var v=x[0].replace(/\[\d*\]/,function(y){r=y.slice(1,-1);return""});var s=typeof(x[1])==="undefined"?true:x[1];if(t[v]){if(typeof t[v]==="string"){t[v]=[t[v]]}if(typeof r==="undefined"){t[v].push(s)}else{t[v][r]=s}}else{t[v]=s}}}return t}if(n.length>0){var o=l().letter;c(".a-z-list").simpleaccordion({closeAccordionContent:false});if(o!==undefined){c(".letters").find("li").removeClass("active");c(".letters").find("[data-letter='"+o+"']").addClass("active");m(o).then(function(){var p=location.href.indexOf("#");if(p===-1){return}var s=location.href.substring(p+1);var r="#"+s+"header";var q=c(r);q.trigger("click")})}n.find(".letters").on("click","li",function(q){q.preventDefault();if(!c(this).hasClass("disabled")){c(".letters").find("li").removeClass("active");c(this).addClass("active");var p=c(this).data("letter");if(typeof p!=="undefined"){m(p)}}})}c(".scroll-to-top").on("click",function(){c("html, body").animate({scrollTop:(c(".ind-teaser").offset().top-100)},500)})},initHighcharts:function(){Highcharts.setOptions({colors:["#497ea9","#afcc7a","#f2cf3b"]});c(".hc-teaser").find(".hc-chart").highcharts({title:{text:"Prozentpunkte/Monat",align:"left",style:{color:"#666"},useHTML:true},legend:{},xAxis:{categories:["5/14","6/14","7/14","8/14","9/14","10/14","11/14","12/14","1/15","2/15","3/15","4/15"]},yAxis:{title:{text:null}},series:[{name:"Aktuelle Lage",data:[30,20,30,-10,-40,-20,-15,0,20,30,15,40]},{name:"Aufträge",data:[40,30,20,-40,-60,-40,-35,0,40,50,35,60]},{name:"Umstatz",data:[10,0,-5,-70,-90,-70,-40,-30,5,10,-20,20]}]})},initContenttabs:function(){c(".ct-teaser").contenttab()},initFancybox:function(){var l=null;c(".fancybox").fancybox({beforeLoad:function(){l=c(this.element).next(".img-copyright").clone()},afterLoad:function(){c(".fancybox-inner").append(l)},beforeShow:function(){var o=c(this.element).find("img");var n=o.attr("alt");var p=o.attr("data-img-title");c(".fancybox-image").each(function(){c(this).attr("alt",n);c(this).attr("title",p)});var m=c(this.element).parent().parent().find("figcaption").text();c(".fancybox-inner").append("<div>").append(m).append("</div>")},afterShow:function(){c(".fancybox-close").appendTo(".fancybox-inner")},afterClose:function(){c(this.element[0]).focus()},helpers:{overlay:{css:{background:c(".fancybox").data("overlay-color")}},title:{type:"inside"}},padding:0,topRatio:0,width:"100%",prevEffect:"none",nextEffect:"none",minHeight:200});c(".fancybox-media").each(function(){c(this).fancybox({beforeShow:function(){c(".fancybox-overlay").addClass("fancy-video-box")},afterClose:function(){c(this.element[0]).focus();c(f).off("resize",k)},afterShow:function(){c(".fancybox-close").css("right","50%").css("margin-right",-(c(".fancybox-inner video").width()/2)).css("margin-top",c(".fancybox-skin").css("padding-top"));c(f).resize(k)},helpers:{media:{},overlay:{locked:true,css:{background:c(".fancybox-media").data("overlay-color")}},title:null}})})},initSearch:function(){},initEvents:function(){c(".contact-form, .all-forms").find(".datepicker").datepicker({dateFormat:"dd.mm.yy",changeYear:true,yearRange:"-100:+0"});var l=c(".ev-search-filter"),s=l.find(".extend"),r=s.find("a"),w=l.find(".extended-search"),t=l.find(".btn-wrapper"),n=l.find('input[type="number"]'),m=l.find('input[type="text"]'),v=l.find("select");s.on("click",function(x){x.preventDefault();w.fadeToggle(200).attr("aria-hidden",function(z,y){return(y==="true")?"false":"true"});if(r.text()===l.data("detail-search-label")){r.text(l.data("simple-search-label"));c("#nurKostenfreie").focus()}else{if(r.text()===l.data("simple-search-label")){r.text(l.data("detail-search-label"));s.focus();c("html, body").animate({scrollTop:(c("#ev-search-filter-form").offset().top-80)},500)}}t.toggle()});l.find(".datepicker").datepicker({dateFormat:"dd.mm.yy",changeMonth:false,changeYear:false});l.on("click keydown",".ev-search-btn, label.acc",function(x){if(!j(x)){return}c(this).toggleClass("active");if(c(x.target.parentElement).is("label")){c(this).find("a").attr("aria-pressed",function(z,y){return(y==="true")?"false":"true"}).parent().next(".ev-filter").attr("aria-hidden",function(z,y){return(y==="true")?"false":"true"}).slideToggle(200)}else{c(this).attr("aria-pressed",function(z,y){return(y==="true")?"false":"true"}).next(".ev-filter").attr("aria-hidden",function(z,y){return(y==="true")?"false":"true"}).slideToggle(200)}l.find(".extend");return false});l.on("click",".reset",function(x){x.preventDefault();l.find("input:checkbox").removeAttr("checked");l.find(".datepicker").datepicker("setDate","");n.val("");m.val("");v.val("");n.filter("[data-initialvalue]").each(function(){c(this).val(c(this).attr("data-initialvalue"))});m.filter("[data-initialvalue]").each(function(){c(this).val(c(this).attr("data-initialvalue"))});v.filter("[data-initialvalue]").each(function(){c(this).val(c(this).attr("data-initialvalue"))});c(".ev-search-filter .ev-filter").attr("aria-hidden","true").slideUp(200);c(".ev-search-filter .ev-search-btn, .ev-search-filter label.acc").attr("aria-pressed","false").removeClass("active");c("html, body").animate({scrollTop:(c("#search-filter-form").offset().top-80)},500)});var p;l.on("click","input.acc",function(){p=c(this);p.nextAll(".ev-filter").find('input[type="checkbox"]').prop("checked",this.checked)});l.on("click","input.abb",function(){p.prop("checked",false)});var u=c(".more-participants"),q=c(".form-participants");c("#cf-participant").on("change",function(z){q.empty();var y=parseInt(z.target.value);if(y>=1){for(var x=0;x<y;x++){u.clone().each(function(){var A=c(this);A.find("input, select").each(function(){var C=c(this);var D=C.attr("id")+x;C.attr("id",D);var B=C.attr("name")+x;C.attr("name",B);C.closest(".input-wrapper").find("label").attr("for",D)})}).fadeIn(400).appendTo(q)}}});c("#cf-billing-address").on("change",function(A){var z=parseInt(A.target.value),y=c(".billing-address"),x=c(".billing-information");if(z===2){x.clone().fadeIn(400).appendTo(y)}else{y.find(".billing-information").fadeOut(200,function(){y.empty()})}});var o=c('[data-expanded-on-init="true"]');if(o&&o.length>0){o.prev().toggleClass("active");o.toggle()}if(c('[data-show-extended-search="true"]').length>0){c(".ev-search-filter").find(".extend").click()}},initTeaserHeight:function(){var l=c("#main").find(".row");l.each(function(){var m=c(this),p=m.find("article"),n=0,o=[];if(p.length>1){if(!h){p.each(function(){var q=c(this).find(".teaser-content");if(q.attr("style")!==undefined&&q.attr("style").indexOf("height")!==-1){q.removeAttr("style")}var r=q.innerHeight();if(r>n){n=r}o.push(q)});if(n>0){c.each(o,function(){var r=c(this),q=r.height();if(q<n){r.css("height",n)}})}}else{p.each(function(){var q=c(this).find(".teaser-content");if(q.attr("style")!==undefined&&q.attr("style").indexOf("height")!==-1){q.removeAttr("style")}})}}})},initResizeListener:function(){var m=this;var l=h;c(f).on("resize",function(){var r=c(".header .menu-wrapper"),q=c(".infobar"),o=c(".nav.main"),p=o.find(".pane-content"),n=(c(f).width()>640?false:true);if(l!==n){if(n){q.show();p.find(".menu").hide();r.off("click",".nav-toggle");r.off("click",".search-toggle");p.off("click","h2");m.buildNavigation();m.initBreadcrumb()}else{if(!e){c(f).unbind("scroll");q.hide();p.find(".menu").show();o.off("click","li.channel");m.buildNavigation()}}l=n}m.initTeaserHeight()})},initLinklist:function(){c(".download-object").append("<span>(PDF · 203KB)</span>")},initEmbeddedTeaserVid:function(){var l=c(".inTeaserEmbeddedVideoPlayer");c.each(l,function(n,m){c("#"+m.id).click(function(){a(m.id)})})},highlightSearchTerm:function(){var n=c(".search-results"),m=c("#query");if(n.length>0&&m.length>0){var l=m.data("searchword");if(typeof l!=="undefined"){n.highlight(l)}}}};function j(l){if(l.type==="keydown"){if(l.keyCode!==13&&l.keyCode!==32){return false}l.preventDefault()}return true}function k(){setTimeout(function(){c(".fancybox-close").css("margin-right",-(c(".fancybox-inner video").width()/2))},300)}function d(){var l=c("#navigation").ihkmobilesubnavigation({mainNavToggle:c(".nav-toggle")[0],url:c("#navigation").data("nav-root-url"),maxPanes:6});c(".breadcrumb").ihkmobilebreadcrumbnavigation({subNav:l})}function a(m){var l=c("#"+m);var n=c(l).data("call-url")+"?autostart=true";if(n!==undefined){c.ajax({url:n,success:function(o){c(l).replaceWith(o)}})}}b.init();c(f).load(function(){b.initTeaserHeight()})}))}();