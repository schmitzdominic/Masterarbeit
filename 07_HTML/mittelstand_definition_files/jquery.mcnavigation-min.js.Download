(function(a){a.fn.mcnavigation=function(q){var d=location.href;var c;var k;var l=1;var g=true;var e=true;var f=0;var b=a.extend({},a.fn.mcnavigation.defaults,q);var n=a("meta[name=pbeEnabled]").size()===1;var j=false;var o=p("param");if(!o){o=a("#navigation").data("layer-param")}if(a("#navigationParam").length>0&&a("#navigationParam")[0].dataset&&a("#navigationParam")[0].dataset.param){o=a("#navigationParam")[0].dataset.param}if(o){o=o.split(",")}else{o=""}function p(r){r=r.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+r+"=([^&#]*)"),s=t.exec(location.search);return s===null?"":decodeURIComponent(s[1].replace(/\+/g," "))}function i(){}function m(r){return r.replace(/,/g,"/").replace(/\?param=/g,"/")}function h(s,r){return s.indexOf(r,s.length-r.length)!==-1}return this.each(function(){var E=a(this),s=E.data("base-url"),u=b.url,y={CMChannel:"channel",CMArticle:"article",CMDocument:"document"},A=window.history,F=false,z="";initialLoadPop=true;popstateActive=false;E.removeClass("loading");var I=false;E.on("click keydown","li.channel",function(ah,ak){if(I){ah.preventDefault();return}I=true;z=ah.type;if(!checkOnKeyDown(ah)){I=false;return false}var Y=a(ah.target).parents(".pane").data("lvl");if(Y>=b.maxPanes){return true}ah.preventDefault();var R=a(this),aa=a(".nav.main").find(".pane"),Z=R.parents(".pane"),Q=Z.nextAll(),ad=s+R.data("url"),al=a(".breadcrumb").find(".breadcrumb-list"),N=false,ai,ac,T=R.parents(".pane").data("lvl"),P=T+1,ag=(Z.hasClass("category content"))?true:false,ab=R.hasClass("active");var V;if(T==1){V=d}else{V=location.href.split("/").pop()}R.siblings().removeClass("active");R.addClass("active");R.find("a").addClass("loading");if(!Z.hasClass("category")||Z.hasClass("content")){aa.removeClass("category");Z.addClass("category")}else{N=true;var X=a("<li>").addClass("breadcrumb-item"),K=E.find(".category");K=K.find(".active").find("a");X.append(a("<a>").attr("href",K.attr("href")).text(K.text()));var M=al.find("li").slice(0,P);var W=al.clone().empty();W.append(M.add(X));al.replaceWith(W);if(n&&e){i()}var U=m(K.attr("href")).split("/").pop();if(T==1){A.pushState({navItem:U,navLvl:T,dataUrl:ad,url:V+"?param="+U},V+"?param="+U,V+"?param="+U)}else{if((typeof c!=="undefined")&&(c.indexOf(",")>-1)){f--;var aj=location.href;c=aj.split(",");c=c.slice(0,c.length-1);k="";for(var af=0;af<c.length;af++){k=k+c[af]+","}k=k.slice(0,k.length-1);A.pushState({navItem:U,navLvl:T,dataUrl:ad,url:k+","+U},k+","+U,k+","+U)}else{f--;var S=location.href;S=S.split(",");S=S.slice(0,S.length-1);var L="";for(var ae=0;ae<S.length;ae++){L=L+S[ae]+","}L=L.slice(0,L.length-1);A.pushState({navItem:U,navLvl:T,dataUrl:ad,url:L+","+U},L+","+U,L+","+U)}}}B(ad).done(function(ap){ai=D(ap,P);a("html, body").animate({scrollTop:(ai.find("ul").offset().top+300)},500);if(ag){w(E.find(".pane[data-lvl="+T+"]"),ai,ak,ad)}else{if(!N){if(Z.hasClass("content")){O()}else{J()}}else{var an=aa.filter(function(){return a(this).is(":visible")});if(ab&&an.length<3){var ao=E.find(".pane[data-lvl=2]"),am=parseInt(Z.offset().left)-parseInt(E.offset().left);Z.css({position:"absolute",left:am,"margin-left":0});ao.addClass("transition fadeout");Z.addClass("content borderfy");ao.one("transitionend",function(){ao.removeClass("transition fadeout content");ao.hide();Z.css({position:"relative",left:0});E.stripClass(" active-lvl-").addClass("active-lvl-1")})}else{aa.removeClass("borderfy");E.find(".lvl-"+P).hide().replaceWith(ai).fadeIn(100);if(ah.type==="keydown"){Z.prev().addClass("borderfy").find("li").first().find("a").focus()}E.trigger("nextNavLvlReady")}}}R.find("a").removeClass("loading")});function O(){aa.removeClass("borderfy");if(!F){Z.addClass("transition")}Z.css({"margin-left":"-15%","margin-right":0});Q.reverse().each(function(ao){var an=parseInt(a(this).offset().left)-parseInt(E.offset().left);a(this).css({position:"absolute",left:an,"margin-left":0})});if(!F){Z.one("transitionend",function(){am()})}else{am()}function am(){E.find(".lvl-"+P).hide().replaceWith(ai).fadeIn(100);Z.removeClass("transition");Z.removeClass("content");Z.prev().addClass("borderfy");Q.css({position:"relative",left:0,"margin-left":"-15%","pointer-events":"auto"});E.find('[class*="lvl-"]').filter(function(aB){return a(this).data("lvl")>P}).hide();if(ah.type==="keydown"){Z.prev().find("li").first().find("a").focus()}var ay=a("<li>").addClass("breadcrumb-item"),ap=E.find(".category").find(".active").find("a"),aq=m(ap.attr("href")).split("/").pop();ay.append(a("<a>").attr("href",ap.attr("href")).text(ap.text()));al.append(ay);if(n&&e){i()}var an=V.split("?");if(an.length>1){var aw=an[0],ao=an[1].replace("param=","");var az=m(E.find(".pane.category").next().find("li.active a").attr("href")).split("/").pop();var ax=ao.split(","),ar=ao.split(","),av=ar.pop();if(az!==av){ax=ax.slice(0,ax.length-1);var au="";for(var at=0;at<ax.length;at++){au=au+ax[at]+","}var aA="?param=";au=aw+aA+au+az;V=au}}A.pushState({navItem:aq,navLvl:T,dataUrl:ad,url:V+","+aq},V+","+aq,V+","+aq);E.trigger("nextNavLvlReady")}E.stripClass(" active-lvl-").addClass("active-lvl-"+P)}function J(){j=true;if(A.state){var am=A.state.navLvl,an=T-am;an=an+(f);A.go(an)}}setTimeout(function(){I=false},500)});function t(Q,N){var J=Q.nextAll(),L=E.find(".pane"),O=Q.data("lvl"),K=O+1,M=a(".breadcrumb").find(".breadcrumb-list");L.removeClass("category");Q.addClass("category");B(N).done(function(S){var R=D(S,K);if(!n&&(R.find("ul").children().length<=4)){a("html, body").animate({scrollTop:(R.find("ul").offset().top+300)},500)}L.removeClass("borderfy");Q.addClass("transition");Q.css({"margin-left":"-15%","margin-right":0});J.reverse().each(function(U){var T=parseInt(a(this).offset().left)-parseInt(E.offset().left);a(this).css({position:"absolute",left:T,"margin-left":0})});Q.one("transitionend",function(){E.find(".lvl-"+K).hide().replaceWith(R).fadeIn(100);Q.removeClass("transition");Q.removeClass("content");Q.prev().addClass("borderfy");J.css({position:"relative",left:0,"margin-left":"-15%","pointer-events":"auto"});E.find('[class*="lvl-"]').filter(function(W){return a(this).data("lvl")>K}).hide();var T=a("<li>").addClass("breadcrumb-item"),U=E.find(".category").next().find(".active").find("a"),V=(U.length>0)?m(U.attr("href")).split("/").pop():"";T.append(a("<a>").attr("href",V).text(U.text()));M.append(T);if(n&&e){i()}popstateActive=false;a(document).trigger("navAnimationReady");a(window).off("scroll.nav")});E.stripClass(" active-lvl-").addClass("active-lvl-"+K)});var P=N.split("/").pop();E.find(".lvl-"+O).find('li[data-url="'+P+'"]').first().addClass("active")}function r(N,K){var J=N.prev(),M=N.nextAll(),L=E.find(".pane"),O=N.data("lvl"),Q=O+1,R=a(".breadcrumb").find(".breadcrumb-list"),P={2:50,3:40,4:30,5:20,6:10};L.removeClass("category");N.addClass("category");B(K).done(function(Y){var U=D(Y,Q);if(!n&&(U.find("ul").children().length<=4)){a("html, body").animate({scrollTop:(U.find("ul").offset().top+300)},500)}M.reverse().each(function(){var aa=parseInt(a(this).offset().left)-parseInt(E.offset().left);a(this).css({position:"absolute",left:aa,"margin-left":0})});var T=parseInt(N.offset().left)-parseInt(E.offset().left);N.css({position:"absolute",left:T,"margin-left":0});var Z=parseInt(J.offset().left)-parseInt(E.offset().left);J.css({position:"absolute",left:Z,"margin-left":0});J.prevAll().hide();L.removeClass("content borderfy");E.stripClass(" active-lvl-").addClass("active-lvl-"+Q);J.replaceWith(U);N.prev().addClass("content borderfy").css({position:"relative",left:0,"margin-right":P[Q]+15+"%","margin-left":"-15%"}).animate({"margin-left":0,"margin-right":P[Q]+"%"},200,function(){N.css({position:"relative",left:0,"margin-left":"-15%","pointer-events":"auto"});M.css({position:"relative",left:0,"margin-left":"-15%","pointer-events":"auto"});N.addClass("category");if(z==="keydown"){N.prev().find("li:first-child a").focus()}popstateActive=false;a(document).trigger("navAnimationReady");a(window).off("scroll.nav")});var V=a("<li>").addClass("breadcrumb-item"),X=E.find(".category");if(X.next().length>0){X=X.find(".active").find("a")}else{X=X.find(".active").find("a")}V.append(a("<a>").attr("href",X.attr("href")).text(X.text()));var S=R.find("li").slice(0,Q);var W=R.clone().empty();W.append(S.add(V));R.replaceWith(W);if(n&&e){i()}E.stripClass(" active-lvl-").addClass("active-lvl-"+Q)})}var G=location.href,C=[];var H=A.length;a(window).on("popstate",function(Q){if(!j){var U=-A.state.navLvl;var O=H-A.length;if(O<U){U=O}A.go(U);return false}j=false;var T=a(window).scrollTop(),N=location.href==G&&initialLoadPop;if(N){return}a(window).on("scroll.nav",function(V){V.preventDefault();a(window).scrollTop(T)});var R=E.find(".pane.content").data("lvl"),P=R-1,L=((P-1)>=1?P-1:"undefined");if(A.state){if(popstateActive||C.length>0){C.push(A.state)}else{var M=A.state.navLvl,J=A.state.dataUrl,K=E.find(".pane.category").data("lvl");M=(M===K)?M:K;var S=s+E.find(".pane.category").find("li.active").data("url");popstateActive=true;if(R>M){r(E.find(".pane[data-lvl="+M+"]"),S)}else{t(E.find(".pane[data-lvl="+M+"]"),J)}}}else{if(P>1){if(L){if(R>L){J=s+E.find(".pane[data-lvl="+L+"]").find(".pane-content .active").data("url");r(E.find(".pane[data-lvl="+L+"]"),J)}}}else{if(P===1){a(window).off("scroll.nav")}}}c=location.href;f=0});a(window).on("navAnimationReady",function(){if(C.length>0){var K=E.find(".pane.content").data("lvl"),J=C.shift();if(K>J.navLvl){r(E.find(".pane[data-lvl="+J.navLvl+"]"),J.dataUrl)}else{t(E.find(".pane[data-lvl="+J.navLvl+"]"),J.dataUrl)}}});function B(K){var J={};return a.ajax({url:K,dataType:"json",type:"get",data:J})}function v(K,M,J){if(n){var N=K.tocListId;if(N!==null){var L="LAYER"+N;M.attr("id",L);M.attr("data-cm-metadata",'[{"_":{"$Ref":"content/'+N+'"}}]')}}}function D(M,L){var K=M.items,P=a("<div>").addClass("pane lvl-"+L+" content").attr("data-lvl",L),Q=a("<div>").addClass("pane-content"),O=a("<h2>").text(M.title),J=a("<ul>");v(M,O,true);var N=null;a.each(K,function(W,R){if(R.linktype=="document"){var V=a("<li>").addClass("document");var aa=a("<a>").addClass("menu-download").attr("onmousedown",R.trackCode).attr("href",R.url);var T=a("<span>").addClass("file-name").html(R.title);var Y=a("<span>").addClass("doc-type").html(R.doctype);aa.append(T);aa.append(Y);V.append(aa);J.append(V)}else{if(R.linktype=="external"){var S=a("<li>").addClass("document");var Z=a("<a>").addClass("external-link").attr("href",R.url).attr("target","_blank").attr("rel","noopener").attr("onmousedown",R.trackCode).html(R.title);S.append(Z);J.append(S)}else{if(R.linktype=="extranet"){var S=a("<li>").addClass("document");var Z=a("<a>").addClass("extranet").attr("href",R.url).html(R.title);S.append(Z);J.append(S)}else{if(R.linktype=="intranet"){var S=a("<li>").addClass("document");var Z=a("<a>").addClass("intranet").attr("href",R.url).html(R.title);S.append(Z);J.append(S)}else{var X=a("<li>").addClass(y[R.type]).attr("data-id",R.contentId).attr("data-url",R.contentId),U=a("<a>").addClass(R.linktype).attr("href",R.url).html(R.title);X.append(U);J.append(X)}}}}N=R});Q.append(O).append(J);P.append(Q);return P}function w(P,Q,L,R){var K=P.prev(),S=P.data("lvl"),W=S+1,X=a(".breadcrumb").find(".breadcrumb-list"),V={2:50,3:40,4:30,5:20,6:10};initialLoadPop=false;var U=parseInt(P.offset().left)-parseInt(E.offset().left);P.css({position:"absolute",left:U,"margin-left":0});P.removeClass("content borderfy");E.stripClass(" active-lvl-").addClass("active-lvl-"+W);K.replaceWith(Q);P.prev().addClass("content borderfy").css({position:"relative",left:0,"margin-right":V[W]+15+"%","margin-left":"-15%"});if(!F){P.prev().animate({"margin-left":0,"margin-right":V[W]+"%"},200,function(){P.css({position:"relative",left:0,"margin-left":"-15%","pointer-events":"auto"});P.addClass("category");E.trigger("nextNavLvlReady")})}else{P.css({position:"relative",left:0,"margin-left":"-15%","pointer-events":"auto"});P.addClass("category");E.trigger("nextNavLvlReady")}P.prev().find("li").first().find("a").focus();var T=a("<li>").addClass("breadcrumb-item"),M=E.find(".category");M=M.find(".active").find("a");T.append(a("<a>").attr("href",M.attr("href")).text(M.text()));var J=X.find("li");var O=X.clone().empty();O.append(J.add(T));X.replaceWith(O);if(n&&e){i()}var N=m(M.attr("href")).split("/").pop();if(S==1){A.pushState({navItem:N,navLvl:W,dataUrl:R,url:d+"?param="+N},d+"?param="+N,d+"?param="+N)}E.stripClass(" active-lvl-").addClass("active-lvl-"+W)}x();E.on("nextNavLvlReady",function(K,J){if(l==2){setTimeout(function(){x()},500)}else{x()}});function x(){e=true;if(g){d=d.split("?");d=d[0];A.replaceState({navItem:"",navLvl:1,dataUrl:s+"/"+E.data("root-url"),url:d},d,d);g=false;console.log("replaceHistory {id=6, length="+window.history.length+", navItem=, navLvl=1, baseUrl="+s+", dataUrl="+s+"/"+E.data("root-url")+", globalUrl="+d+", url="+d+"}")}if(typeof o!=="undefined"&&o.length>0){var O=E.find(".pane[data-lvl='"+l+"']");var L=o[0];var R=".pane-content a[href*='"+L+"']";var Q=O.find(R);var J=null;for(var N=0;N<Q.length;N++){var K=Q.eq(N);if((K)&&(K.length>0)&&(K[0].href)){var P=K[0].href;if((h(P,","+L))||(h(P,"="+L))){J=K}}}if(J==null){J=Q.first()}var M=J.parent();o.shift();l++;M.trigger("click")}}E.on("keydown","li:first-child a",function(K){if(K.shiftKey&&K.keyCode===9){var J=a(this);if(!J.parents(".pane").hasClass("lvl-1")){a(this).parents(".pane").next(".pane").find("li:last-child a").focus()}else{if(E.find(".pane.lvl-1 .pane-content h2 a").length<=0){a(".breadcrumb-list").find(".breadcrumb-item:last-child a").focus()}}}});if(E.find(".pane.lvl-1 .pane-content h2 a").length>0){E.find(".pane.lvl-1 .pane-content h2 a").on("keydown",function(J){if(J.shiftKey&&J.keyCode===9){setTimeout(function(){a(".breadcrumb-list").find(".breadcrumb-item:last-child a").focus()},50)}})}E.on("keydown","li:last-child a",function(K){if(K.shiftKey===false&&K.keyCode===9){var J=a(this).parents(".pane").prev(".pane");if(!J.is(":empty")){J.find("li:first-child a").focus()}else{a(".container-fluid").find("a").first().focus()}}})})};a.fn.mcnavigation.defaults={maxPanes:6};a(".container-fluid").click(function(){if(a(".lvl-2:visible").length!=0){var b=a("#breadcrumb-item1").attr("href");a(location).attr("href",b)}})}(jQuery));$.fn.stripClass=function(b,c){var a=new RegExp((!c?"\\b":"\\S+")+b+"\\S*","g");this.attr("class",function(d,e){if(!e){return}return e.replace(a,"")});return this};$.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)};